<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç³»æœé è³¼ç³»çµ±</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="container">
    <h2>ğŸ‘• ç³»æœè³¼è²·ç™»è¨˜</h2>

    <div class="shirt-preview">
        <img src="preview.png" alt="ç³»æœé è¦½åœ–" id="previewImg">
        <p class="price-tag">å–®åƒ¹ï¼š$250</p>
    </div>

    <form id="orderForm">
        <div class="form-group">
            <label for="name">å§“å</label>
            <input type="text" id="name" placeholder="è«‹è¼¸å…¥å§“å" required>
        </div>

        <div class="form-group">
            <label for="studentId">å­¸è™Ÿ</label>
            <input type="text" id="studentId" placeholder="ä¾‹å¦‚ï¼šB110... " required>
        </div>

        <div class="form-group">
            <label for="mail">é›»å­éƒµä»¶(è¯çµ¡ç”¨)</label>
            <input type="email" id="mail" placeholder="ä¾‹å¦‚ï¼š7777@NCUEmail " required>
        </div>

        <div class="form-group">
            <label for="size">å°ºå¯¸</label>
            <select id="size">
                <option value="S">S</option>
                <option value="M" selected>M</option>
                <option value="L">L</option>
                <option value="2L">2L</option>
                <option value="XL">XL</option>
            </select>
        </div>

        <div class="form-group">
            <label for="amount">è³¼è²·ä»¶æ•¸</label>
            <input type="number" id="amount" value="1" min="1">
        </div>

        <div class="total-price">
            ç¸½è¨ˆé‡‘é¡ï¼š<span id="totalDisplay">$250</span>
        </div>

        <button type="submit" id="submitBtn">é€å‡ºè¨‚å–®</button>
        </form>
    </div>

    <script>
        const scriptURL = 'https://script.google.com/macros/s/AKfycbw4Grm_l83E730br2TGBsD0pWbeWzTWlHVM6hFkMSr-LmBqJSFtYzTlq4XBzA86LNAkKQ/exec';
        const UNIT_PRICE = 250; // é€™è£¡è¨­å®šå–®åƒ¹

        const form = document.getElementById('orderForm');
        const submitBtn = document.getElementById('submitBtn');
        const amountInput = document.getElementById('amount');
        const totalDisplay = document.getElementById('totalDisplay');

        // --- è‡ªå‹•è¨ˆç®—é‡‘é¡é‚è¼¯ ---
        function updateTotal() {
            const amount = parseInt(amountInput.value) || 0;
            const total = amount * UNIT_PRICE;
            totalDisplay.innerText = `$${total}`;
        }

        // ç›£è½è¼¸å…¥æ¡†è®ŠåŒ– (æ‰“å­—æˆ–é»æ“Šä¸Šä¸‹ç®­é ­)
        amountInput.addEventListener('input', updateTotal);

        form.addEventListener('submit', e => {
            e.preventDefault();
            
            // åŸºæœ¬æª¢æŸ¥
            const name = document.getElementById('name').value.trim();
            const studentId = document.getElementById('studentId').value.trim();
            if (!name || !studentId) {
                alert("è«‹å¡«å¯«å¿…å¡«æ¬„ä½");
                return;
            }

            submitBtn.disabled = true;
            submitBtn.innerText = 'è™•ç†ä¸­...';

            const data = {
                name: name,
                studentId: studentId,
                mail: document.getElementById('mail').value,
                size: document.getElementById('size').value,
                amount: amountInput.value,
                totalPrice: parseInt(amountInput.value) * UNIT_PRICE // åŒæ­¥æŠŠç¸½åƒ¹é€åˆ°å¾Œå°
            };

            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                body: JSON.stringify(data),
                headers: { 'Content-Type': 'application/json' }
            })
            .then(() => {
                alert("ğŸ‰ ç™»è¨˜æˆåŠŸï¼");
                submitBtn.disabled = false;
                submitBtn.innerText = 'é€å‡ºè¨‚å–®';
                form.reset();
                updateTotal(); // é‡ç½®å¾Œæ¢å¾©é¡¯ç¤º $250
            })
            .catch(error => {
                console.error('Error!', error.message);
                alert("ç™¼ç”ŸéŒ¯èª¤ï¼Œè«‹ç¨å¾Œå†è©¦");
                submitBtn.disabled = false;
                submitBtn.innerText = 'é€å‡ºè¨‚å–®';
            });
        });
    </script>
</body>
</html>